#############
# SharpBGFX #
########################################################################################################################
sharp-bgfx:
  clone: git clone https://github.com/MikePopoloski/SharpBgfx.git --depth 1

  build:
    windows64:
      - devenv SharpBgfx/SharpBgfx.csproj /build Debug
      - devenv SharpBgfx/SharpBgfx.csproj /build Release

    linux64:
      - xbuild /p:Configuration=Debug SharpBgfx/SharpBgfx.csproj
      - xbuild /p:Configuration=Release SharpBgfx/SharpBgfx.csproj

  install:
     windows64:
      - copytree: [SharpBgfx\bin\Debug, Debug\lib]
      - copytree: [SharpBgfx\bin\Release, Release\lib]

     linux64:
      - copytree: [SharpBgfx/bin/Debug, Debug\lib]
      - copytree: [SharpBgfx/bin/Release, Release\lib]

#############
# MoonSharp #
########################################################################################################################
moonsharp:
  clone: git clone https://github.com/xanathar/moonsharp.git --depth 1

  build:
    windows64:
      - devenv src\MoonSharp.Interpreter\MoonSharp.Interpreter.net35-client.csproj /build Debug
      - devenv src\MoonSharp.Interpreter\MoonSharp.Interpreter.net35-client.csproj /build Release

    linux64:
      - xbuild /p:TargetFrameworkVersion=v4.0 /p:Configuration=Debug src/MoonSharp.Interpreter/MoonSharp.Interpreter.net35-client.csproj
      - xbuild /p:TargetFrameworkVersion=v4.0 /p:Configuration=Release src/MoonSharp.Interpreter/MoonSharp.Interpreter.net35-client.csproj

  install:
    windows64:
      - copytree: [src\MoonSharp.Interpreter\bin\Debug, Debug\lib]
      - copytree: [src\MoonSharp.Interpreter\bin\Release, Release\lib]

    linux64:
      - copytree: [src/MoonSharp.Interpreter/bin/Debug, Debug/lib]
      - copytree: [src/MoonSharp.Interpreter/bin/Release, Release/lib]

###########
# SDL2-CS #
########################################################################################################################
sdl2-cs:
  clone: git clone https://github.com/flibitijibibo/SDL2-CS.git --depth 1

  build:
    windows64:
      - devenv SDL2-CS.csproj /build Debug
      - devenv SDL2-CS.csproj /build Release

    linux64:
      - xbuild /p:Configuration=Debug SDL2-CS.csproj
      - xbuild /p:Configuration=Release SDL2-CS.csproj


  install:
     windows64:
      - copytree: [bin\Debug, Debug\lib]
      - copytree: [bin\Release, Release\lib]

     linux64:
      - copytree: [bin/Debug, Debug/lib]
      - copytree: [bin/Release, Release/lib]


##############
# YamlDotNet #
########################################################################################################################
yamldotnet:
  clone: git clone https://github.com/aaubry/YamlDotNet.git --depth 1

  build:
    windows64:
      - devenv YamlDotNet.sln /build Debug /project YamlDotNet
      - devenv YamlDotNet.sln /build Release-Unsigned /project YamlDotNet

    linux64:
      - xbuild /p:Configuration=Debug YamlDotNet/YamlDotNet.csproj
      - xbuild /p:Configuration=Release-Unsigned YamlDotNet/YamlDotNet.csproj

  install:
     windows64:
      - copytree: [YamlDotNet\bin\Debug, Debug\lib]
      - copytree: [YamlDotNet\bin\Release-Unsigned, Release\lib]

     linux64:
      - copytree: [YamlDotNet/bin/Debug, Debug/lib]
      - copytree: [YamlDotNet/bin/Release-Unsigned, Release/lib]

###############
# MsgPack-cli #
########################################################################################################################
msgpack-cli:
  clone: git clone https://github.com/msgpack/msgpack-cli.git --depth 1

  build:
    windows64:
      - devenv src\MsgPack.Net40\MsgPack.Net40.csproj /build Debug
      - devenv src\MsgPack.Net40\MsgPack.Net40.csproj /build Release

    linux64:
      - xbuild /p:Configuration=Debug src/MsgPack.Net40/MsgPack.Net40.csproj
      - xbuild /p:Configuration=Release src/MsgPack.Net40/MsgPack.Net40.csproj

  install:
     windows64:
      - copytree: [src\MsgPack.Net40\bin\Debug, Debug\lib]
      - copytree: [bin\net40-client, Release\lib]

     linux64:
      - copytree: [src/MsgPack.Net40/bin/Debug, Debug/lib]
      - copytree: [bin/net40-client, Release/lib]


########
# SLD2 #
########################################################################################################################
sdl2:
  clone: download https://www.libsdl.org/release/SDL2-2.0.4-win32-x64.zip SDL2-2.0.4-win32-x64.zip

  build:
    windows64: extract SDL2-2.0.4-win32-x64.zip

  install:
     windows64:
      - copy: [SDL2.dll, Release\lib]

###########
# nanomsg #
########################################################################################################################
nanomsg:
  clone: git clone https://github.com/nanomsg/nanomsg.git --depth 1

  build:
    posix: &nanomsg_build_posix
      [./autogen.sh, ./configure, make]

    linux64:  *nanomsg_build_posix
    linux32:  *nanomsg_build_posix
    darwin64: *nanomsg_build_posix
    windows64:
      - cmake .
      - devenv nanomsg.sln /build Release

  install:
    linux64:
      - copy: [.libs/libnanomsg.so, dynlib]

    linux32:
      - copy: [.libs/libnanomsg.so, dynlib]

    darwin64:
      - copy: [.libs/libnanomsg.so, dynlib]

    windows64:
      - copy: [Release\nanomsg.dll, Release\lib]

nnanomsg:
  clone: git clone https://github.com/mhowlett/NNanomsg.git --depth 1

  build:
    windows64:
      - devenv NNanomsg.sln /build Debug /project NNanomsg
      - devenv NNanomsg.sln /build Release /project NNanomsg

    linux64:
      - xbuild /p:Configuration=Debug NNanomsg/NNanomsg.csproj
      - xbuild /p:Configuration=Release-Unsigned NNanomsg/NNanomsg.csproj

  install:
     windows64:
      - copytree: [NNanomsg\bin\Release, Release\lib]
      - copytree: [NNanomsg\bin\Debug, Debug\lib]

     linux64:
      - copytree: [NNanomsg/bin/Release, Release]
      - copytree: [NNanomsg/bin/Debug, Debug]