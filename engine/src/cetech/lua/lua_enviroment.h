#pragma once

/*******************************************************************************
**** Includes
*******************************************************************************/

#include "celib/math/types.h"

#include "luajit/lua.hpp"
#include "lua_resource.h"


/*******************************************************************************
**** Interface
*******************************************************************************/
namespace cetech {

    /***************************************************************************
    **** Lua enviroment.
    ***************************************************************************/
    namespace lua_enviroment {


        /***********************************************************************
        **** Execute lua resource.
        ***********************************************************************/
        void execute_resource(const resource_lua::Resource* res);

        /***********************************************************************
        **** Execute string.
        ***********************************************************************/
        void execute_string(const char* str);

        /***********************************************************************
        **** Set module function
        ***********************************************************************/
        void set_module_function(const char* module,
                                 const char* name,
                                 const lua_CFunction func);

        /***********************************************************************
        **** Set module constructor
        ***********************************************************************/
        void set_module_constructor(const char* module,
                                    const lua_CFunction func);

        /***********************************************************************
        **** Call global function
        ***********************************************************************/
        void call_global(const char* func,
                         const char* args = nullptr,
                         ...);

        /***********************************************************************
        **** Clean temp variables
        ***********************************************************************/
        void clean_temp();

        /***********************************************************************
        **** New temp Vector2
        ***********************************************************************/
        Vector2& new_tmp_vector2();

        /***********************************************************************
        **** New temp Vector3
        ***********************************************************************/
        Vector3& new_tmp_vector3();
    }

    /***************************************************************************
    **** Lua enviroment globals function.
    ***************************************************************************/
    namespace lua_enviroment_globals {

        /***********************************************************************
        **** Init system.
        ***********************************************************************/
        void init();

        /***********************************************************************
        **** Shutdown system.
        ***********************************************************************/
        void shutdown();
    }
}
