/***********************************************************************
**** Virtual file
***********************************************************************/

#ifndef CETECH_FILE_H
#define CETECH_FILE_H


/***********************************************************************
**** Includes
***********************************************************************/

#include <stddef.h>


/***********************************************************************
**** Typedefs
***********************************************************************/

typedef void *vfile_t;


/***********************************************************************
**** Enums
***********************************************************************/

enum open_mode {
    VFILE_READ,
    VFILE_WRITE,
};


/***********************************************************************
**** Const/dest
***********************************************************************/

vfile_t vfile_from_file(const char *path, enum open_mode mode);
void vfile_close(vfile_t file);

/***********************************************************************
**** Seek
***********************************************************************/

void vfile_seek(vfile_t file, size_t position);
void vfile_seek_to_end(vfile_t file);
void vfile_skip(vfile_t file, size_t bytes);
size_t vfile_position(vfile_t file);

/***********************************************************************
**** Size
***********************************************************************/

size_t vfile_size(vfile_t  file);

/***********************************************************************
**** Read/Write
***********************************************************************/
size_t vfile_read(vfile_t file,
          char* buffer,
          size_t size);

size_t vfile_write(vfile_t file,
           const char* buffer,
           size_t size);

#endif //CETECH_FILE_H
