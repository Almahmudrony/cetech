########
# Core #
###############################################################################

##########
# Stages #
###############################################################################
stages:
 - test
 - doc

########
# Test #
###############################################################################
test:
  image: ondravoves/cetech:build_ci
  stage: test
  script:
  - scripts/build.py
  #- py.test -v engine/tests/

#################
# Gitlab pages  #
###############################################################################
pages:
  image: ondravoves/debian:python2.7
  stage: doc
  script:
  - pip install mkdocs mkdocs-bootswatch
  - mkdocs build -f scripts/mkdocs.yml -d public

  only:
    - master

  artifacts:
    paths:
    - public